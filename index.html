<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RASM School Duty Roster Generator</title>
    <style>
/* Logo Style */
.logo-img {
    max-width: 80px; /* Limit the logo size */
    margin-bottom: 1px; /* Space between logo and text */
}
        :root {
            --primary-color: #4CAF50;
            --header-text-color: #ffffff;
            --text-color: #333333;
            --border-thick: 4px solid #000;
            --font-family: Arial, sans-serif;
            --blue-color: #007BFF;
            --highlight-color1: #FFEB3B; /* Yellow for School Information */
            --highlight-color2: #FF9800; /* Orange for Student Information */
            --highlight-color3: #00BCD4; /* Teal for Special Roles */
            --highlight-color4: #8BC34A; /* Light Green for Prefects */
            --generate-btn-color: #2196F3;
            --reset-btn-color: #FF5722;
            --print-btn-color: #8BC34A;
        }
}
/* Stacked forms on small screens */
@media (max-width: 600px) {
    form input, form select, form button {
        width: 100%; /* Full width on small screens */
        margin-bottom: 10px; /* Add spacing */
    }
}
/* Scrollable table on small screens */
@media (max-width: 768px) {
    .report-table {
        display: block;
        overflow-x: auto; /* Allow horizontal scrolling */
        white-space: nowrap; /* Prevent text wrapping */
    }
footer {
    position: sticky;
    bottom: 0;
    width: 100%;
    background-color: #FFC107; /* Highlight color (yellow) */
    color: #000; /* Black text for contrast */
    text-align: center;
    padding: 15px; /* Increased padding for better visibility */
    font-size: 12px; /* Slightly larger font size */
    font-weight: bold; /* Emphasize the text */
    border-top: 4px solid #FF5722; /* Add a bold top border for distinction */
    box-shadow: 0 -4px 8px rgba(0, 0, 0, 0.2); /* Add shadow for a lifted look */
}

        body {
            font-family: var(--font-family);
            margin: 20px;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            color: var(--text-color);
        }
}
.highlight-prefect {
    background-color: #C8E6C9 !important; /* Retain highlight for print */
    font-weight: bold;
    border: 1px solid #4CAF50;
    padding: 5px;
    border-radius: 5px;
}
.highlight-role {
    background-color: #FFFF99 !important; /* Retain highlight for print */
    font-weight: bold;
    border: 1px solid #FFC107;
    padding: 5px;
    border-radius: 5px;
}
.highlight-prefect {
    background-color: #C8E6C9; /* Light green */
    font-weight: bold;
    border: 1px solid #4CAF50; /* Green border */
    padding: 5px;
    display: inline-block;
    border-radius: 5px;
}
.highlight-role {
    background-color: #FFFF99; /* Light yellow */
    font-weight: bold;
    border: 1px solid #FFC107; /* Golden border */
    padding: 5px;
    display: inline-block;
    border-radius: 5px;
}

    #loginSection button:hover {
        background-color: #45a049; /* Slightly darker green */
    } 
        header {
            background-color: var(--primary-color);
            color: var(--header-text-color);
            text-align: center;
            padding: 15px;
            border: 3px solid #000;
            border-radius: 8px;
            margin-bottom: 20px;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
}
button {
    min-width: 48px; /* Recommended minimum size for touch targets */
    min-height: 48px;
    padding: 10px 15px;
    font-size: 16px; /* Larger font for readability */
}
/* Stacked forms on small screens */
@media (max-width: 600px) {
    form input, form select, form button {
        width: 100%; /* Full width on small screens */
        margin-bottom: 10px; /* Add spacing */
    }
}
/* Scrollable table on small screens */
@media (max-width: 768px) {
    .report-table {
        display: block;
        overflow-x: auto; /* Allow horizontal scrolling */
        white-space: nowrap; /* Prevent text wrapping */
        }

        .container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .info-box {
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .info-box legend {
            font-weight: bold;
        }

        .school-info {
            background-color: var(--highlight-color1);
        }

        .student-info {
            background-color: var(--highlight-color2);
        }

        .special-roles {
            background-color: var(--highlight-color3);
        }

        .prefects-info {
            background-color: var(--highlight-color4);
    
    }
        .roster-header {
            text-align: center;
            font-size: 24px;
            margin-bottom: 10px;
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            table-layout: auto;
        }

        th, td {
            padding: 8px 10px; 
            text-align: center;
            border: var(--border-thick);
            font-size: 18px;
            word-wrap: break-word;
        }

        th {
            background-color: var(--primary-color);
            color: var(--header-text-color);
            font-size: 20px;
        }

        td:first-child {
            font-weight: bold;
            width: 20%;
        }

        td {
            width: 80%;
        }

        table th, table td {
            max-width: 150px;
            word-wrap: break-word;
        }

        #rosterTable {
            display: none;
        }

        .special-roles-box, .prefects-box {
            margin-top: 20px;
            padding: 15px;
            border: var(--border-thick);
            background-color: #f9f9f9;
            font-size: 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .special-roles-box strong, .prefects-box strong {
            font-size: 20px;
        }

        button {
            padding: 10px 20px;
            border: none;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            width: 200px;
        }

        .generate-btn {
            background-color: var(--generate-btn-color);
            color: var(--header-text-color);
        }

        .reset-btn {
            background-color: var(--reset-btn-color);
            color: var(--header-text-color);
        }

        .print-btn {
            background-color: var(--print-btn-color);
            color: var(--header-text-color);
        }

        .generate-btn:hover {
            background-color: #1976D2;
        }

        .reset-btn:hover {
            background-color: #D32F2F;
        }

        .print-btn:hover {
            background-color: #7CB342;
        }

        #spinner {
            display: none;
            margin: 20px auto;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
        }

        #successMessage {
            display: none;
            text-align: center;
            color: green;
            font-size: 18px;
            margin-top: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        #loginSection {
            text-align: center;
            margin-top: 50px;
        }

        #loginSection input {
            padding: 10px;
            margin: 10px 0;
            width: 250px;
            font-size: 16px;
            border-radius: 5px;
        }

       #loginSection {
        display: block;
        text-align: center;
        margin: auto;
        margin-top: 50px;
        width: 300px; /* Reduce width */
        padding: 20px; /* Add some padding for spacing */
        border: 2px solid #2196F3; /* Add a border for a clean look */
        border-radius: 10px; /* Round the corners */
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Add subtle shadow */
        background-color: #e3f2fd; /* Light blue background */
    }

        #loginError {
            color: red;
            display: none;
            font-size: 16px;
            margin-top: 10px;
        }

        #mainContent {
            display: none;
        }

   
        /* Stamp Styles */
        .stamp {
            border: 2px solid blue; /* Border for stamp */
            color: blue; /* Text color for stamp */
            width: 200px; /* Adjusted width for visibility */
            height: 100px; /* Adjusted height for visibility */
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 10px auto;
            text-align: center;
            font-weight: bold;
            display: none; /* Hidden by default */
        }
        

        .stamp p {
            margin: 5px 0;
        }

        .stamp .date {
            font-style: italic;
            margin-top: 10px;
        }

        @media print {
            body {
                margin: 0;
                font-size: 14px;
            }

            header, footer, .container, button {
                display: none;
            }

            #rosterTable {
                display: block;
                margin: 0 auto;
                page-break-before: always;
                width: 100%;
            }

            table {
                height: auto;
                border: 2px solid #000;
            }

            th, td {
                font-size: 16px;
                padding: 15px;
                word-wrap: break-word;
                max-width: 150px;
                border: 2px solid #000;
            }

            .special-roles-box, .prefects-box {
                font-size: 16px;
                page-break-inside: avoid;
                margin-top: 10px;
                border: 2px solid #000;
                padding: 10px;
            }

            .stamp {
                display: block;
                margin-top: 20px;
                font-size: 14px;
                font-weight: bold;
                border: 2px solid blue;
                color: blue;
                text-align: center;
            }
        }
    </style>
</head>
<body>
 <div class="logo">
        <img src="https://i.imgur.com/uWrz8rt.png" alt="School Logo" class="logo-img">
    </div>
    <!-- Login Section -->
    <div id="loginSection">
  <h1>RASM School Management System</h1>
        <h2>Nachu Junior School </h2>
   <h2>Duty Roster Generator </h2>
        <form id="loginForm">
            <input type="text" id="username" placeholder="Username" required><br><br>
            <input type="password" id="password" placeholder="Password" required><br><br>
            <button type="submit">Login</button>
        </form>
        <div id="loginError">Invalid username or password</div>
    </div>

    <!-- Main Content (Roster Form) -->
    <div id="mainContent">
        <header>
<div class="logo">
        <img src="https://i.imgur.com/uWrz8rt.png" alt="School Logo" class="logo-img">
    </div>
            <h1>RASM School Duty Roster Generator</h1>
            <p>Generate Termly Duty Roster For Your School.</p>
  <p>Nachu Junior School </p>
        </header>
        <form id="rosterForm">
            <div class="container">
                <div class="info-box school-info">
                    <fieldset>
                        <legend>School Information</legend>
                        <label for="schoolName">School Name:</label>
                        <input type="text" id="schoolName" placeholder="Enter School Name" required><br><br>
                        <label for="grade">Grade:</label>
                        <input type="text" id="grade" placeholder="Enter Grade" required><br><br>
                        <label for="year">Year:</label>
                        <input type="number" id="year" placeholder="Enter Year (e.g., 2024)" required><br><br>
                        <label for="term">Term:</label>
                        <input type="text" id="term" placeholder="Enter Term" required><br><br>
                    </fieldset>
                </div>

                <div class="info-box student-info">
                    <fieldset>
                        <legend>Student Information</legend>
                        <textarea id="studentNamesInput" placeholder="Enter student names, one per line" required></textarea>
                    </fieldset>
                </div>

                <div class="info-box special-roles">
                    <fieldset>
                        <legend>Assign Other Roles</legend>
                        <label for="arrangeTables">Arranging Tables:</label>
                        <input type="text" id="arrangeTables" placeholder="Enter student name"><br><br>
                        <label for="cleanWhiteboard">Cleaning Whiteboard:</label>
                        <input type="text" id="cleanWhiteboard" placeholder="Enter student name"><br><br>
                        <label for="emptyDustbin">Emptying Dustbin:</label>
                        <input type="text" id="emptyDustbin" placeholder="Enter student name"><br><br>
                        <label for="closeWindows">Closing Windows:</label>
                        <input type="text" id="closeWindows" placeholder="Enter student name"><br><br>
                    </fieldset>
                </div>

                <!-- Prefects Section -->
                <div class="info-box prefects-info">
                    <fieldset>
                        <legend><strong>Prefects</strong></legend>
                        <label for="prefectNames">Enter Prefects' Names (one per line):</label><br>
                        <textarea id="prefectNames" placeholder="Enter prefect names, one per line"></textarea><br><br>
                    </fieldset>
                </div>
            </div>

            <button type="button" class="generate-btn" onclick="generateRoster()">Generate Roster</button>
            <button type="button" class="reset-btn" onclick="resetForm()">Reset</button>
            <button type="button" class="print-btn" onclick="window.print()">Print Roster</button>
            <button type="button" class="download-pdf-btn" onclick="downloadPDF()">Download as PDF</button>
        </form>

        <section id="rosterTable">
            <div class="roster-header" id="headerDetails"></div>
            <table>
                <thead>
                    <tr>
                        <th>Day</th>
                        <th>Assigned Students</th>
                    </tr>
                </thead>
                <tbody id="rosterBody"></tbody>
            </table>

            <div class="special-roles-box" id="otherRoles"></div>
            <div class="prefects-box" id="prefectsList"></div>

            <div class="stamp">
                <p>Nachu Junior Highschool</p>
                <p>P.O BOX 561-00902</p>
                <p>Kikuyu</p>
                <p class="date">Date..........<span id="dateStamp"></span></p>
            </div>
        </section>
<div class="stamp">
    <p>Nachu Junior Highschool</p>
    <p>P.O BOX 561-00902</p>
    <p>Kikuyu</p>
    <p class="date">Date..........<span id="dateStamp"></span></p>
</div>

        <!-- Spinner (Loading indicator) -->
        <div id="spinner"></div>

        <!-- Success Message -->
        <div id="successMessage">Roster generated successfully!</div>

        <footer>
            <p>2025 Nachu Junior School. All rights reserved.
Powered by RASM Tech.

Looking for reliable school management software, We offer the following solutions:

Timetable Generator,
Duty Roster System,
School and Exam Management System,
Fee Management System
,Library Management System.Contact us today:
0792 755 676,

 RASM Tech  Empowering schools with efficient, organized, and effortless management solutions.</p>
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>

    <script>
        const validUsername = "Nachu254";
        const validPassword = "Nm643PpQ@";

        document.getElementById("loginForm").addEventListener("submit", function (e) {
            e.preventDefault();

            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;

            if (username === validUsername && password === validPassword) {
                document.getElementById("loginSection").style.display = "none";
                document.getElementById("mainContent").style.display = "block";
            } else {
                document.getElementById("loginError").style.display = "block";
            }
        });

        const weekdays = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"];

        function generateRoster() {
            document.getElementById("spinner").style.display = "block";

            setTimeout(() => {
                document.getElementById("spinner").style.display = "none";

                const schoolName = document.getElementById("schoolName").value;
                const grade = document.getElementById("grade").value;
                const year = document.getElementById("year").value;
                const term = document.getElementById("term").value;

                const studentNamesInput = document.getElementById("studentNamesInput").value.trim();
                const studentNames = studentNamesInput.split("\n").filter(name => name.trim() !== "");

                const arrangeTables = document.getElementById("arrangeTables").value;
                const cleanWhiteboard = document.getElementById("cleanWhiteboard").value;
                const emptyDustbin = document.getElementById("emptyDustbin").value;
                const closeWindows = document.getElementById("closeWindows").value;

                const prefectNamesInput = document.getElementById("prefectNames").value.trim();
                const prefectNames = prefectNamesInput.split("\n").filter(name => name.trim() !== "");

                const headerDetails = document.getElementById("headerDetails");
                headerDetails.innerHTML = `
                    <h2>${schoolName}</h2>
                    <p>Grade: ${grade} | Year: ${year} | Term: ${term}</p>
                `;

                const roster = distributeStudents(studentNames, weekdays);
                displayRoster(roster, arrangeTables, cleanWhiteboard, emptyDustbin, closeWindows, prefectNames);
            }, 2000);
        }

        function distributeStudents(studentNames, weekdays) {
            const roster = {};
            const studentsPerDay = Math.ceil(studentNames.length / weekdays.length);
            let studentIndex = 0;

            weekdays.forEach(day => {
                roster[day] = [];
                for (let i = 0; i < studentsPerDay; i++) {
                    if (studentIndex < studentNames.length) {
                        roster[day].push(studentNames[studentIndex]);
                        studentIndex++;
                    }
                }
            });

            return roster;
        }

      function displayRoster(roster, arrangeTables, cleanWhiteboard, emptyDustbin, closeWindows, prefectNames) {
    const rosterBody = document.getElementById("rosterBody");
    rosterBody.innerHTML = "";

    weekdays.forEach(day => {
        const row = document.createElement("tr");
        const dayCell = document.createElement("td");
        const studentCell = document.createElement("td");
        dayCell.textContent = day;
        studentCell.textContent = roster[day].join(", ");
        row.appendChild(dayCell);
        row.appendChild(studentCell);
        rosterBody.appendChild(row);
    });

    document.getElementById("otherRoles").innerHTML = `
        <strong>Other Roles:</strong><br>
        <p>Arranging Tables: <span class="highlight-role">${arrangeTables ? arrangeTables : 'Not Assigned'}</span></p>
        <p>Cleaning Whiteboard: <span class="highlight-role">${cleanWhiteboard ? cleanWhiteboard : 'Not Assigned'}</span></p>
        <p>Emptying Dustbin: <span class="highlight-role">${emptyDustbin ? emptyDustbin : 'Not Assigned'}</span></p>
        <p>Closing Windows: <span class="highlight-role">${closeWindows ? closeWindows : 'Not Assigned'}</span></p>
    `;

    document.getElementById("prefectsList").innerHTML = `
        <strong>Prefects:</strong><br>
        <p>${prefectNames.length > 0 ? prefectNames.map(name => `<span class="highlight-prefect">${name}</span>`).join(", ") : 'No Prefects Assigned'}</p>
    `;

    const dateStamp = new Date().toLocaleDateString();
    document.getElementById("dateStamp").textContent = dateStamp;

    document.getElementById("rosterTable").style.display = "block";
}


        function resetForm() {
            document.getElementById("rosterForm").reset();
            document.getElementById("rosterTable").style.display = "none";
            document.getElementById("successMessage").style.display = "none";
        }

function downloadPDF() {
    const rosterContent = document.getElementById("rosterTable");
    
    // Make sure the stamp is visible for the PDF
    const stamp = document.querySelector(".stamp");
    stamp.style.display = "block"; // Temporarily make the stamp visible

    const opt = {
        margin: 0.2,
        filename: 'Duty_Roster.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
    };

    html2pdf().set(opt).from(rosterContent).toPdf().get('pdf').then(function (pdf) {
        const pageHeight = pdf.internal.pageSize.height;
        const contentHeight = pdf.internal.pageSize.getHeight();
        if (contentHeight > pageHeight) {
            pdf.addPage(); // Add a new page if necessary
        }
    }).save().finally(() => {
        // Revert stamp visibility after generating the PDF
        stamp.style.display = "none";
    });
}

    </script>
</body>
</html>
